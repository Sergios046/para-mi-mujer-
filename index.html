<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#ffeaf3" />
  <title>Para Saharaim üíò</title>

  <style>
    :root{
      --ink:#2b2b35;
      --mut:#5c5c6a;
      --card:rgba(255,255,255,.74);
      --shadow: 0 18px 50px rgba(41, 16, 36, .12);
      --shadow2: 0 8px 24px rgba(41, 16, 36, .10);
      --radius:22px;
      --ease: cubic-bezier(.2,.9,.2,1);
      --glass: blur(14px);
      --font: ui-rounded, system-ui, -apple-system, "SF Pro Rounded", "Segoe UI", Roboto, Arial, sans-serif;

      /* ‚úÖ TU FOTO DE FONDO (sube assets/fondo.jpg) */
      --bgimg: url("./assets/fondo.jpg");
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: var(--font);
      color:var(--ink);
      background: #fff;
      overflow-x:hidden;
    }

    /* Fondo con foto SIN estirar, sin pixelote (cover) */
    body::before{
      content:"";
      position:fixed; inset:0;
      background-image: var(--bgimg);
      background-size: cover;
      background-position:center;
      background-repeat:no-repeat;
      transform: scale(1.06);
      filter: blur(10px) brightness(.88) saturate(1.05);
      opacity:.75;
      pointer-events:none;
      z-index:-2;
    }
    /* Capa suave para legibilidad */
    body::after{
      content:"";
      position:fixed; inset:0;
      background: radial-gradient(1000px 600px at 20% 20%, rgba(255,255,255,.75), rgba(255,255,255,.50)),
                  linear-gradient(180deg, rgba(255,255,255,.55), rgba(255,255,255,.65));
      pointer-events:none;
      z-index:-1;
    }

    .wrap{
      min-height:100%;
      display:grid;
      place-items:center;
      padding: 18px 14px 26px;
    }
    .app{
      width:min(920px, 96vw);
      background: var(--card);
      border: 1px solid rgba(255,255,255,.9);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: var(--glass);
      -webkit-backdrop-filter: var(--glass);
      overflow:hidden;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 14px 14px 10px;
      border-bottom: 1px solid rgba(255,255,255,.75);
      background: linear-gradient(90deg, rgba(255,255,255,.65), rgba(255,255,255,.35));
    }

    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:900; letter-spacing:.2px;
      flex-wrap:wrap;
    }

    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.74);
      box-shadow: var(--shadow2);
      border: 1px solid rgba(255,255,255,.92);
      white-space:nowrap;
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background: conic-gradient(from 0deg, #ff6fae, #a78bfa, #4fd1c5, #ff6fae);
      box-shadow: 0 0 18px rgba(255,111,174,.35);
      animation: pulse 1.8s var(--ease) infinite;
    }
    @keyframes pulse { 50% { transform: scale(1.25); filter: brightness(1.05);} }

    .actions{
      display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;
    }

    .btnSmall{
      border: 1px solid rgba(255,255,255,.92);
      background: rgba(255,255,255,.74);
      padding: 10px 12px;
      border-radius: 14px;
      cursor:pointer;
      box-shadow: var(--shadow2);
      font-weight: 850;
      transition: transform .15s var(--ease), opacity .15s var(--ease);
      user-select:none;
      touch-action: manipulation;
    }
    .btnSmall:hover{ transform: translateY(-1px) scale(1.02); }
    .btnSmall:active{ transform: translateY(0px) scale(.98); }

    .main{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 14px;
      padding: 14px;
    }
    @media (max-width: 860px){
      .main{ grid-template-columns: 1fr; }
    }

    .panel{
      background: rgba(255,255,255,.62);
      border: 1px solid rgba(255,255,255,.9);
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      padding: 14px;
      position:relative;
      overflow:hidden;
    }

    .screen{ display:none; animation: in .28s var(--ease); }
    .screen.active{ display:block; }
    @keyframes in { from{opacity:0; transform: translateY(10px) scale(.99);} to{opacity:1; transform: translateY(0) scale(1);} }

    .hero h1{
      margin: 6px 0 8px;
      font-size: clamp(22px, 3.6vw, 40px);
      line-height: 1.1;
    }
    .hero p{
      margin:0 0 14px;
      color:var(--mut);
      line-height:1.55;
      font-weight: 650;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: 12px;
      margin-top: 12px;
    }
    @media (max-width: 520px){
      .grid{ grid-template-columns: 1fr; }
    }

    .tile{
      border: 1px solid rgba(255,255,255,.9);
      background: rgba(255,255,255,.76);
      border-radius: 18px;
      padding: 14px;
      cursor:pointer;
      box-shadow: var(--shadow2);
      transition: transform .18s var(--ease), background .18s var(--ease);
      position:relative;
      overflow:hidden;
      user-select:none;
      touch-action: manipulation;
    }
    .tile:hover{ transform: translateY(-2px) scale(1.01); background: rgba(255,255,255,.86); }
    .tile:active{ transform: translateY(0px) scale(.98); }

    .tile .t-top{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
    .tile .name{ font-weight: 950; letter-spacing:.2px; }
    .tile .desc{ margin-top:6px; color:var(--mut); font-weight:650; line-height:1.4; font-size: 13.5px; }
    .badge{
      font-size: 12px;
      font-weight: 950;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(255,255,255,.92);
      box-shadow: var(--shadow2);
      white-space:nowrap;
    }
    .locked{ opacity:.62; }

    .backRow{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-bottom: 10px; }
    .back{
      display:inline-flex; align-items:center; gap:8px;
      border: 1px solid rgba(255,255,255,.92);
      background: rgba(255,255,255,.76);
      padding: 10px 12px;
      border-radius: 14px;
      cursor:pointer;
      font-weight: 950;
      box-shadow: var(--shadow2);
      transition: transform .15s var(--ease);
      user-select:none;
      touch-action: manipulation;
    }
    .back:hover{ transform: translateY(-1px); }
    .back:active{ transform: translateY(0) scale(.98); }

    /* Carta m√°s ‚Äúpapel real‚Äù */
    .letterShell{
      border-radius: 20px;
      padding: 16px;
      border: 1px solid rgba(255,255,255,.92);
      background: rgba(255,255,255,.64);
      box-shadow: var(--shadow2);
      position:relative;
      overflow:hidden;
    }
    .letterShell::before{
      content:"";
      position:absolute; inset:-8px;
      background:
        repeating-linear-gradient(0deg, rgba(0,0,0,.02) 0 1px, transparent 1px 22px),
        radial-gradient(520px 190px at 20% 10%, rgba(255,204,122,.22), transparent 60%),
        radial-gradient(520px 190px at 90% 90%, rgba(255,111,174,.18), transparent 60%);
      opacity:.7;
      pointer-events:none;
    }
    .paper{
      position:relative;
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(0,0,0,.04);
      border-radius: 18px;
      padding: 16px 16px 14px;
      box-shadow: 0 10px 30px rgba(41,16,36,.08);
    }
    .paper::after{
      content:"";
      position:absolute;
      right: 14px; top: 14px;
      width: 14px; height:14px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,111,174,.9), rgba(255,111,174,.35));
      box-shadow: 0 0 0 6px rgba(255,111,174,.10);
      opacity:.9;
    }
    .paper p{
      margin:0;
      line-height:1.75;
      font-weight: 650;
      font-size: 15px;
      white-space:pre-wrap;
      padding-right: 18px;
    }
    .signature{
      margin-top: 14px;
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:10px;
      flex-wrap:wrap;
      color: var(--mut);
      font-weight: 800;
      font-size: 13.5px;
    }
    .signName{
      font-weight: 950;
      color: #2b2b35;
    }

    .btnRow{ display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin-top: 12px; }
    .btn{
      border: 1px solid rgba(255,255,255,.92);
      background: rgba(255,255,255,.78);
      padding: 12px 14px;
      border-radius: 16px;
      cursor:pointer;
      font-weight: 950;
      min-width: 150px;
      box-shadow: var(--shadow2);
      transition: transform .16s var(--ease);
      user-select:none;
      touch-action: manipulation;
    }
    .btn:hover{ transform: translateY(-2px) scale(1.02); }
    .btn:active{ transform: translateY(0) scale(.98); }
    .btn.primary{
      background: linear-gradient(180deg, rgba(255,111,174,.22), rgba(255,255,255,.78));
      border-color: rgba(255,111,174,.35);
    }
    .btn[disabled]{ opacity:.55; cursor:not-allowed; transform:none; }

    #fx{ position:fixed; inset:0; pointer-events:none; z-index: 999; }
    .toast{
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      background: rgba(255,255,255,.88);
      border: 1px solid rgba(255,255,255,.95);
      box-shadow: var(--shadow2);
      padding: 10px 14px;
      border-radius: 999px;
      font-weight: 950;
      display:none;
      max-width: calc(100vw - 24px);
      text-align:center;
      z-index: 1000;
    }

    @media (prefers-reduced-motion: reduce){
      *{ animation: none !important; transition: none !important; }
    }
  </style>
</head>

<body>
  <canvas id="fx"></canvas>
  <div class="toast" id="toast"></div>

  <div class="wrap">
    <div class="app">
      <div class="topbar">
        <div class="brand">
          <span class="pill"><span class="dot"></span> sorpresa</span>
          <span class="pill">para <b id="girlNameTop">Saharaim</b> üíò</span>
        </div>

        <div class="actions">
          <button class="btnSmall" id="heartsBtn">üíñ Corazones: ON</button>
          <button class="btnSmall" id="copyBtn">üìã Copiar link</button>
        </div>
      </div>

      <div class="main">
        <!-- LEFT -->
        <div class="panel">
          <!-- HOME -->
          <div class="screen active hero" id="home">
            <h1 id="homeTitle">Hey Saharaim üíò</h1>
            <p id="homeSubtitle">
              Te hice algo chiquito pero con mucho cari√±o. Expl√≥ralo con calma.
            </p>

            <div class="grid">
              <div class="tile" data-go="letter">
                <div class="t-top">
                  <div class="name">üíå Carta</div>
                  <div class="badge">leer</div>
                </div>
                <div class="desc">Una carta para ti, sin prisa.</div>
              </div>

              <div class="tile" data-go="test" id="tileTest">
                <div class="t-top">
                  <div class="name">üß† Mini test</div>
                  <div class="badge" id="tBadge">start</div>
                </div>
                <div class="desc">Responde y desbloqueas la pregunta üíò</div>
              </div>

              <div class="tile locked" data-go="question" id="tileQuestion">
                <div class="t-top">
                  <div class="name">üíò Pregunta</div>
                  <div class="badge" id="qBadge">üîí</div>
                </div>
                <div class="desc">Primero completa el mini test üòº</div>
              </div>

              <div class="tile" data-go="photos">
                <div class="t-top">
                  <div class="name">üì∏ Fotos</div>
                  <div class="badge">pronto</div>
                </div>
                <div class="desc">Aqu√≠ metemos fotos cuando me las pases.</div>
              </div>
            </div>
          </div>

          <!-- LETTER -->
          <div class="screen" id="letter">
            <div class="backRow">
              <div class="back" data-go="home">‚Üê Men√∫</div>
              <div class="badge">carta</div>
            </div>

            <div class="letterShell">
              <div class="paper">
                <p id="letterText"></p>

                <div class="signature">
                  <span>Con cari√±o,</span>
                  <span class="signName" id="signatureName"></span>
                </div>
              </div>

              <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
                <button class="btnSmall" id="retypeBtn">‚ú® Releer con efecto</button>
                <button class="btnSmall" data-go="test">üß† Ir al mini test</button>
              </div>
            </div>
          </div>

          <!-- TEST (por ahora 3, luego lo subimos a 5 con tus preguntas) -->
          <div class="screen" id="test">
            <div class="backRow">
              <div class="back" data-go="home">‚Üê Men√∫</div>
              <div class="badge" id="testBadge">test</div>
            </div>

            <div class="letterShell">
              <div class="paper">
                <p style="font-weight:950; margin:0 0 10px;">Mini test üß†</p>
                <p style="color:var(--mut); margin:0 0 12px;">
                  Contesta y desbloqueas la pregunta üíò
                </p>

                <div id="quiz"></div>

                <div class="btnRow">
                  <button class="btn primary" id="submitTest">‚úÖ Ver resultado</button>
                  <button class="btn" id="resetTest">üßº Reiniciar</button>
                </div>
              </div>
            </div>
          </div>

          <!-- PHOTOS -->
          <div class="screen" id="photos">
            <div class="backRow">
              <div class="back" data-go="home">‚Üê Men√∫</div>
              <div class="badge">fotos</div>
            </div>

            <div class="letterShell">
              <div class="paper">
                <p style="font-weight:950; margin:0 0 10px;">Fotos üì∏</p>
                <p style="color:var(--mut); margin:0;">
                  Aqu√≠ vamos a poner un carrusel bonito con tus fotos.  
                  Cuando me las pases, lo armamos con swipe en celular.
                </p>
              </div>
            </div>
          </div>

          <!-- QUESTION -->
          <div class="screen" id="question">
            <div class="backRow">
              <div class="back" data-go="home">‚Üê Men√∫</div>
              <div class="badge">üíò</div>
            </div>

            <div class="letterShell">
              <div class="paper" style="text-align:center;">
                <p style="font-weight:950; font-size:18px; margin:0 0 10px;" id="questionText">
                  ¬øQuieres ser mi San Valent√≠n? üíò
                </p>
                <p style="color:var(--mut); margin:0 0 12px;" id="questionSub">
                  (no hay respuestas incorrectas‚Ä¶ solo una correcta üòå)
                </p>

                <div class="btnRow">
                  <button class="btn primary" id="yesBtn">‚úÖ S√≠</button>
                  <button class="btn" id="noBtn">ü§ç Todav√≠a no</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- RIGHT (ahora limpio y rom√°ntico) -->
        <div class="panel">
          <div class="letterShell">
            <div class="paper">
              <p style="font-weight:950; margin:0 0 10px;" id="sideTitle">Detalles</p>
              <p style="color:var(--mut); margin:0;" id="sideText">
                ‚Ä¢ Puedes prender/apagar corazones arriba üíñ<br>
                ‚Ä¢ La pregunta se desbloquea con el mini test üíò<br>
                ‚Ä¢ Todo est√° hecho para celular ‚úÖ
              </p>
            </div>
          </div>

          <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btnSmall" id="confettiBtn">üéâ Confeti</button>
            <button class="btnSmall" id="softResetBtn">üßº Reset</button>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
(() => {
  const $ = (id) => document.getElementById(id);

  /* ==========================
     üîß EDITA AQU√ç LO IMPORTANTE
     ========================== */

  const GIRL_NAME = "Saharaim";
  const YOUR_NAME = "Sergios"; // <- pon aqu√≠ tu nombre como firma

  // Carta: aqu√≠ me pegar√°s TU texto despu√©s (por ahora placeholder bonito)
  const LETTER_TEXT = `Saharaim,

Quer√≠a hacerte algo diferente‚Ä¶ algo que se quedara aqu√≠ guardado,
para que lo puedas leer cuando quieras.

Me encanta estar contigo, me gusta tu vibra,
y lo f√°cil que se siente todo cuando est√°s conmigo.

Gracias por ser t√∫.
Con cari√±o,`;

  // Mini test (ahorita 3). Cuando me pases tus 5 preguntas lo cambiamos aqu√≠.
  // Formato: { q: "pregunta", options: ["a","b","c","d"], correctIndex: 0 }
  const QUIZ = [
    { q: "¬øCu√°l es mi comida favorita?", options: ["Tacos", "Sushi", "Pizza", "Pasta"], correctIndex: 1 },
    { q: "¬øQu√© me gusta m√°s hacer contigo?", options: ["Ir por comida", "Ver pelis", "Solo estar contigo", "Salir de fiesta"], correctIndex: 2 },
    { q: "¬øCu√°l es mi detalle favorito?", options: ["Cartas", "Flores", "Postres", "Regalos"], correctIndex: 0 },
  ];

  const PASS_SCORE = 2; // con 2/3 pasa. Cuando sean 5, lo ajustamos (ej: 4).

  /* ==========================
     UI + NAVEGACI√ìN
     ========================== */

  const screens = ["home","letter","test","photos","question"];
  function go(name){
    if(name === "question" && !state.unlocked){
      toast("üîí Primero completa el mini test üß†");
      return;
    }
    screens.forEach(s => $(s).classList.remove("active"));
    $(name).classList.add("active");
  }

  document.addEventListener("click", (e)=>{
    const to = e.target.closest("[data-go]")?.getAttribute("data-go");
    if(to) go(to);
  });

  function toast(msg){
    const t = $("toast");
    t.textContent = msg;
    t.style.display = "block";
    clearTimeout(toast._t);
    toast._t = setTimeout(()=> t.style.display="none", 2200);
  }

  /* ==========================
     TYPEWRITER FIX (anti bug)
     ========================== */

  const sleep = (ms)=>new Promise(r=>setTimeout(r, ms));
  let typeToken = 0;

  async function typeInto(el, text, base=14){
    const myToken = ++typeToken;
    el.textContent = "";
    for(const ch of text){
      if(myToken !== typeToken) return;
      el.textContent += ch;
      await sleep(base + Math.random()*22);
    }
  }

  const retypeBtn = $("retypeBtn");
  async function renderLetter(animated=true){
    // cancela cualquier tipeo anterior
    typeToken++;

    if(!animated){
      $("letterText").textContent = LETTER_TEXT;
      retypeBtn.disabled = false;
      return;
    }

    retypeBtn.disabled = true;
    await typeInto($("letterText"), LETTER_TEXT, 12);
    retypeBtn.disabled = false;
  }

  /* ==========================
     QUIZ (din√°mico)
     ========================== */

  const state = {
    picks: Array(QUIZ.length).fill(null),
    unlocked: localStorage.getItem("unlockedQuestion") === "1",
    heartsOn: true
  };

  function renderQuiz(){
    const wrap = $("quiz");
    wrap.innerHTML = "";

    QUIZ.forEach((item, qi)=>{
      const block = document.createElement("div");
      block.style.margin = "12px 0 14px";

      const q = document.createElement("p");
      q.style.fontWeight = "950";
      q.style.margin = "0 0 10px";
      q.textContent = `${qi+1}) ${item.q}`;

      const row = document.createElement("div");
      row.className = "btnRow";

      item.options.forEach((opt, ai)=>{
        const b = document.createElement("button");
        b.className = "btn";
        b.textContent = opt;
        b.addEventListener("click", ()=>{
          state.picks[qi] = ai;
          // feedback visual
          [...row.querySelectorAll("button")].forEach(x => x.style.transform = "");
          b.style.transform = "translateY(-2px) scale(1.03)";
          toast("‚úÖ Guardado");
        });
        row.appendChild(b);
      });

      block.appendChild(q);
      block.appendChild(row);
      wrap.appendChild(block);
    });
  }

  function updateLocks(){
    $("girlNameTop").textContent = GIRL_NAME;
    $("homeTitle").textContent = `Hey ${GIRL_NAME} üíò`;
    $("signatureName").textContent = YOUR_NAME;

    const tileQ = $("tileQuestion");
    if(state.unlocked){
      tileQ.classList.remove("locked");
      $("qBadge").textContent = "‚úÖ";
      $("tBadge").textContent = "done";
      tileQ.querySelector(".desc").textContent = "Ya est√° desbloqueada üòº";
    }else{
      tileQ.classList.add("locked");
      $("qBadge").textContent = "üîí";
      $("tBadge").textContent = "start";
      tileQ.querySelector(".desc").textContent = "Primero completa el mini test üòº";
    }
  }

  $("submitTest").addEventListener("click", ()=>{
    if(state.picks.some(v => v === null)){
      toast("Te falta contestar una üòº");
      return;
    }
    let score = 0;
    for(let i=0;i<QUIZ.length;i++){
      if(state.picks[i] === QUIZ[i].correctIndex) score++;
    }
    if(score >= PASS_SCORE){
      state.unlocked = true;
      localStorage.setItem("unlockedQuestion","1");
      updateLocks();
      spawnConfetti(220);
      toast(`PASASTE ‚úÖ (${score}/${QUIZ.length})`);
    }else{
      toast(`Casi üò≠ (${score}/${QUIZ.length})`);
    }
  });

  $("resetTest").addEventListener("click", ()=>{
    state.picks = Array(QUIZ.length).fill(null);
    renderQuiz();
    toast("Reiniciado üßº");
  });

  /* ==========================
     Corazones / Confeti
     ========================== */

  const canvas = $("fx");
  const ctx = canvas.getContext("2d");
  function resize(){
    const dpr = devicePixelRatio || 1;
    canvas.width = innerWidth * dpr;
    canvas.height = innerHeight * dpr;
    ctx.setTransform(dpr,0,0,dpr,0,0);
  }
  addEventListener("resize", resize, {passive:true});
  resize();

  let particles = [];
  function spawnConfetti(n=160){
    for(let i=0;i<n;i++){
      particles.push({
        x: innerWidth*(0.2 + Math.random()*0.6),
        y: innerHeight*0.15 + Math.random()*30,
        vx: (Math.random()-0.5)*3.0,
        vy: (1.8 + Math.random()*2.6),
        s: 3 + Math.random()*6,
        life: 1,
        kind: Math.random()<0.55 ? "heart" : "dot",
        hue: 300 + Math.random()*90
      });
    }
  }

  function drawHeart(x,y,s,hue,alpha){
    ctx.save();
    ctx.translate(x,y);
    ctx.scale(s/18, s/18);
    ctx.globalAlpha = alpha;
    ctx.fillStyle = `hsl(${hue} 95% 70%)`;
    ctx.beginPath();
    ctx.moveTo(0, 6.2);
    ctx.bezierCurveTo(0, 0, -9, 0, -9, 6.2);
    ctx.bezierCurveTo(-9, 12.5, 0, 16.5, 0, 21);
    ctx.bezierCurveTo(0, 16.5, 9, 12.5, 9, 6.2);
    ctx.bezierCurveTo(9, 0, 0, 0, 0, 6.2);
    ctx.closePath();
    ctx.fill();
    ctx.restore();
  }

  function tick(){
    ctx.clearRect(0,0,innerWidth,innerHeight);
    particles = particles.filter(p => p.life > 0.03 && p.y < innerHeight + 60);

    for(const p of particles){
      p.x += p.vx;
      p.y += p.vy;
      p.vy += 0.03;
      p.life *= 0.985;

      if(!state.heartsOn && p.kind === "heart") continue;

      const alpha = Math.max(0, p.life);
      if(p.kind === "heart"){
        drawHeart(p.x, p.y, p.s, p.hue, alpha);
      }else{
        ctx.globalAlpha = alpha;
        ctx.fillStyle = `hsl(${p.hue} 95% 70%)`;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.s*0.5, 0, Math.PI*2);
        ctx.fill();
      }
    }
    requestAnimationFrame(tick);
  }
  tick();

  $("confettiBtn").addEventListener("click", ()=>{
    spawnConfetti(200);
    toast("üéâ");
  });

  $("heartsBtn").addEventListener("click", ()=>{
    state.heartsOn = !state.heartsOn;
    $("heartsBtn").textContent = state.heartsOn ? "üíñ Corazones: ON" : "ü§ç Corazones: OFF";
    toast(state.heartsOn ? "Corazones ON üíñ" : "Corazones OFF ü§ç");
  });

  /* ==========================
     Copy link + reset
     ========================== */

  $("copyBtn").addEventListener("click", async ()=>{
    try{
      await navigator.clipboard.writeText(location.href);
      toast("Link copiado üìã");
    }catch{
      toast("No pude copiar üòÖ (copia manual)");
    }
  });

  $("softResetBtn").addEventListener("click", ()=>{
    localStorage.removeItem("unlockedQuestion");
    state.unlocked = false;
    state.picks = Array(QUIZ.length).fill(null);
    renderQuiz();
    updateLocks();
    renderLetter(false);
    go("home");
    toast("Reset üßº");
  });

  /* ==========================
     Pregunta final
     ========================== */

  $("yesBtn").addEventListener("click", ()=>{
    spawnConfetti(260);
    toast("üíòüíòüíò");
  });

  $("noBtn").addEventListener("click", ()=>{
    toast("Todo bien üòå");
  });

  /* Init */
  renderQuiz();
  updateLocks();
  renderLetter(true);

})();
</script>
</body>
</html>
